'use strict';

var core = require('@emotion/core');

var react = require('react');
/** @jsx jsx */


let importPromise;

const Preview = _ref => {
  let url = _ref.url,
      options = _ref.options;
  let containerRef = react.useRef(null);
  react.useEffect(() => {
    if (!importPromise) {
      importPromise = Promise.resolve(require('@iframely/embed.js')).then(() => {
        window.iframely.extendOptions({
          key: options.clientApiKey
        });
      });
    } // Tell iframely to always re-render when the current ref changes


    importPromise.then(() => {
      window.iframely.load(containerRef.current, url);
    });
  }, [url, containerRef.current]);
  return core.jsx("div", {
    ref: containerRef
  });
};

exports.default = Preview;
