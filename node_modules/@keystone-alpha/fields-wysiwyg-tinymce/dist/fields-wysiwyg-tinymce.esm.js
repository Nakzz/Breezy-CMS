import { join as _join } from "path";
import { dirname } from 'path';
import express from 'express';
import { Text } from '@keystone-alpha/fields';

function prepareMiddleware() {
  const tinymcePath = dirname(require.resolve('tinymce'));
  const app = express();
  app.use('/tinymce-assets', express.static(tinymcePath));
  return app;
}

let Wysiwyg = {
  type: 'Wysiwyg',
  implementation: Text.implementation,
  views: {
    Controller: Text.views.Controller,
    Field: _join(__dirname, "11z4har"),
    Filter: Text.views.Filter
  },
  adapters: Text.adapters,
  prepareMiddleware
};
export { Wysiwyg };
